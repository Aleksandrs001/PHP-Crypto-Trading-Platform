<!DOCTYPE html>
<html lang="en">
<head>
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="body">

{% include 'Templates/navbar.twig' %}

<br>
<h2 class="welcomeUser">Transaction history</h2>
<br>

{% set total = 0 %}
{% for transaction in transactions %}
    {% set price = transaction.exchange %}
    {% set amount = transaction.numberTraded %}
    {% set total = total + (amount * price) %}
{% endfor %}

{% if total < 0 %}
    <span  class="welcomeUser" style="color: green;">Total gain: {{ total | number_format(2, '.', ',') }} €</span>
{% elseif total > 0 %}
    <span class="welcomeUser" style="color: red; text-align: center;"> Profit loss: {{ total | number_format(2, '.', ',') }} €</span>
{% else %}
    No profit or loss
{% endif %}

<div class="md:px-10 py-2 w-full">
    <div class="shadow overflow-hidden rounded border-b border-gray-200">
        <table class="min-w-full bg-white">
            <thead class="bg-gray-800 text-white">
            <tr>
                <th class="w-1/3 text-left py-2 px-4 uppercase font-semibold text-sm">Stock Symbol</th>
                <th class="w-1/3 text-left py-3 px-4 uppercase font-semibold text-sm">Number traded</th>
                <th class="text-left py-3 px-4 uppercase font-semibold text-sm">Date</th>
                <th class="text-left py-3 px-4 uppercase font-semibold text-sm">Exchanged for</td>
            </tr>
            </thead>
            <tbody class="text-gray-700">
            {% for transaction in transactions %}
                <tr>
                    <td class="w-1/3 text-left py-3 px-4">{{ transaction.stockSymbol }}</td>
                    <td class="w-1/3 text-left py-3 px-4">{{ transaction.numberTraded }}</td>
                    <td class="w-1/3 text-left py-3 px-4">{{ transaction.date }}</td>
                    <td class="w-1/6 text-left py-3 px-4">{{ transaction.exchange | number_format(2, '.', ',') }} €</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>



</div>

</body>
</html>